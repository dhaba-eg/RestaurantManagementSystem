@using Microsoft.JSInterop
@inherits LayoutComponentBase
@inject IJSRuntime _jsRuntime
@inject NavigationManager NavigationManager
@inject ITokenService TokenService

<div>
    <!-- Navbar -->
    <NavMenu />

    <!-- Main content -->
    <main>
        @Body
    </main>

    <!-- Footer -->
    @* <footer>
        <!-- Your existing footer code -->
        <Footer />
    </footer> *@
</div>

@code {
    protected override async Task OnInitializedAsync()
    {
        var token = await TokenService.GetAccessToken();
        if (token == null)
        {
            // No valid token; 
            NavigationManager.NavigateTo("/");
        }
        else
        {
            // Token is valid; proceed to main content
            NavigationManager.NavigateTo("/select-table");
        }
    }

}